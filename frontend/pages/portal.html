<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Komunitas - AquaNime</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<script>
  // Prevent white blink on reload if dark mode is enabled
  (function() {
    try {
      if (localStorage.getItem('aquanimeDarkMode') === 'true') {
        document.documentElement.classList.add('dark-mode-preload');
        document.body.classList.add('dark-mode');
      }
    } catch(e){}
  })();
</script>
<body>
    <header>
        <nav>
            <div class="logo">
                <img src="../assets/images/logo.png" alt="AquaNime Logo" loading="lazy"> <span>AquaNime</span>
            </div>
            <ul id="nav-links">
                <li><a href="../index.html" data-lang-key="beranda">BERANDA</a></li>
                <li><a href="tentang.html" data-lang-key="tentang">TENTANG</a></li>
                <li><a href="proyek.html" data-lang-key="proyek">PROYEK</a></li>
                <li><a href="portal.html" data-lang-key="portal">PORTAL</a></li>
                <li><a href="kontak.html" data-lang-key="kontak">KONTAK</a></li>
            </ul>
            <div class="lang-mode-toggles">
                <div class="dark-mode-toggle" id="dark-mode-toggle">
                    <i class="fas fa-moon"></i> <span data-lang-key="dark_mode">Dark Mode</span>
                </div>
            </div>
            <div class="social-icons">
                <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" aria-label="TikTok"><i class="fab fa-tiktok"></i></a>
                <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                <a href="#" aria-label="Discord"><i class="fab fa-discord"></i></a>
            </div>
            <div class="hamburger-menu" id="hamburger-menu">
                <i class="fas fa-bars"></i>
            </div>
        </nav>
    </header>

    <main class="container">
        <section class="content-section nested-list animate-target">
            <h2 data-lang-key="portal_title">Portal Informasi Komunitas</h2>

            <div class="portal-search-bar">
                <input type="text" id="portal-search-input" placeholder="Cari di portal..." data-lang-key="portal_search_placeholder">
                <button id="portal-search-button"><i class="fas fa-search"></i></button>
            </div>
            <p class="search-result-info" id="search-result-info" style="display:none; margin-top: 10px; font-style: italic; color: var(--primary-blue);"></p>

            <div id="portal-content-list">
                <h3 data-lang-key="portal_news_info_h3">Berita & Info</h3>
                <ul>
                    <li><a href="../portal_details/berita_terbaru.html" data-lang-key="portal_announcements" data-search-term="pengumuman terbaru komunitas">Pengumuman Terbaru Komunitas</a></li>
                    <li><a href="../portal_details/event_mendatang.html" data-lang-key="portal_upcoming_events" data-search-term="jadwal event gathering mendatang">Jadwal Event & Gathering Mendatang</a></li>
                    <li><a href="../portal_details/agenda_bulanan.html" data-lang-key="portal_monthly_agenda" data-search-term="agenda komunitas bulanan">Agenda Komunitas Bulanan</a></li>
                </ul>

                <h3 data-lang-key="portal_member_works_h3">Karya Member</h3>
                <ul>
                    <li><a href="../portal_details/karya_ilustrasi.html" data-lang-key="portal_illustrations_fanart" data-search-term="ilustrasi fanart dari anggota">Ilustrasi & Fanart dari Anggota</a></li>
                    <li><a href="../portal_details/karya_tulisan.html" data-lang-key="portal_writings_stories" data-search-term="kumpulan cerita tulisan">Kumpulan Cerita & Tulisan</a></li>
                    <li><a href="../portal_details/karya_musik_audio.html" data-lang-key="portal_music_audio" data-search-term="karya musik audio">Karya Musik & Audio</a></li>
                    <li><a href="../portal_details/karya_video_shortfilm.html" data-lang-key="portal_video_shortfilm" data-search-term="video short film">Video & Short Film</a></li>
                    <li><a href="../portal_details/proyek_kolaborasi_anggota.html" data-lang-key="portal_member_collaborations" data-search-term="proyek kolaborasi anggota">Proyek Kolaborasi Anggota</a></li>
                </ul>

                <h3 data-lang-key="portal_insights_articles_h3">Insight & Artikel</h3>
                <ul>
                    <li><a href="../portal_details/artikel_budaya_pop_jepang.html" data-lang-key="portal_jp_pop_culture_articles" data-search-term="artikel budaya pop jepang">Artikel Budaya Pop Jepang</a></li>
                    <li><a href="../portal_details/review_rekomendasi.html" data-lang-key="portal_reviews_recommendations" data-search-term="review rekomendasi anime manga game">Review & Rekomendasi Anime/Manga/Game</a></li>
                    <li><a href="../portal_details/riset_fakta.html" data-lang-key="portal_jp_research_facts" data-search-term="riset fakta seputar jejepangan">Riset & Fakta Seputar Jejepangan</a></li>
                    <li><a href="../portal_details/berita_jejepangan.html" data-lang-key="portal_latest_jp_news" data-search-term="berita jejepangan terkini">Berita Jejepangan Terkini</a></li>
                </ul>

                <h3 data-lang-key="portal_documentation_h3">Dokumentasi</h3>
                <ul>
                    <li><a href="../portal_details/galeri_event_komunitas.html" data-lang-key="portal_event_gallery" data-search-term="galeri foto event komunitas">Galeri Foto Event Komunitas</a></li>
                    <div class="portal-gallery-grid">
                        <div class="portal-gallery-item"><img src="../assets/images/gallery_event1.jpg" alt="Foto Event 1" loading="lazy"></div> <div class="portal-gallery-item"><img src="../assets/images/gallery_event2.jpg" alt="Foto Event 2" loading="lazy"></div> <div class="portal-gallery-item"><img src="../assets/images/gallery_event3.jpg" alt="Foto Event 3" loading="lazy"></div> <div class="portal-gallery-item"><img src="../assets/images/gallery_event4.jpg" alt="Foto Event 4" loading="lazy"></div> </div>
                    <li><a href="../portal_details/aftermovie_video_event.html" data-lang-key="portal_aftermovie_videos" data-search-term="aftermovie video event">Aftermovie / Video Event</a></li>
                    <li><a href="../portal_details/arsip_proyek_komunitas.html" data-lang-key="portal_community_project_archive" data-search-term="arsip proyek komunitas">Arsip Proyek Komunitas</a></li>
                    <li><a href="../portal_details/artikel_lama.html" data-lang-key="portal_old_articles" data-search-term="artikel lama">Artikel Lama</a></li>
                </ul>

                <h3 data-lang-key="portal_community_h3">Komunitas</h3>
                <ul>
                    <li><a href="../portal_details/highlight_member.html" data-lang-key="portal_member_highlights" data-search-term="highlight member anggota berprestasi menarik">Highlight Member (Anggota Berprestasi/Menarik)</a></li>
                    <li><a href="tentang.html#testimoni-member" data-lang-key="testimoni_anggota" data-search-term="testimoni anggota">Testimoni Anggota</a></li>
                    <li><a href="../portal_details/weekly_showcase.html" data-lang-key="portal_weekly_showcase" data-search-term="weekly showcase karya terbaik mingguan">Weekly Showcase (Karya Terbaik Mingguan)</a></li>
                    <li><a href="../portal_details/behind_the_scenes.html" data-lang-key="portal_behind_the_scenes" data-search-term="behind the scenes di balik layar kegiatan">Behind the Scenes (Di Balik Layar Kegiatan)</a></li>
                </ul>

                <h3 data-lang-key="portal_submit_works_h3">Submit Karya</h3>
                <ul>
                    <li><a href="../portal_details/kirim_tulisan_fanart.html" data-lang-key="portal_send_writing_fanart" data-search-term="kirim tulisan fanart">Kirim Tulisan / Fanart</a></li>
                    <li><a href="../portal_details/upload_video_musik.html" data-lang-key="portal_upload_video_music" data-search-term="upload video musik">Upload Video / Musik</a></li>
                    <li><a href="../portal_details/ajukan_proyek_ide.html" data-lang-key="portal_propose_project_idea" data-search-term="ajukan proyek ide">Ajukan Proyek / Ide</a></li>
                </ul>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h4 data-lang-key="explore_footer">EKSPLORASI</h4>
                <ul>
                    <li><a href="../index.html" data-lang-key="home_footer">Beranda</a></li>
                    <li><a href="tentang.html" data-lang-key="about_us_footer">Tentang kami</a></li>
                    <li><a href="tentang.html#visi-misi" data-lang-key="vision_mission_footer">Visi & Misi</a></li>
                    <li><a href="tentang.html#maskot" data-lang-key="about_mascot_footer">Tentang Maskot</a></li>
                    <li><a href="portal.html" data-lang-key="info_portal_footer">Portal Informasi</a></li>
                    <li><a href="proyek.html" data-lang-key="community_projects_footer">Proyek Komunitas</a></li>
                    <li><a href="#" data-lang-key="events_gathering_footer">Event dan Gathering</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4 data-lang-key="community_footer">KOMUNITAS</h4>
                <ul>
                    <li><a href="../community/komunitas_join.html" data-lang-key="join_community_footer">Join Komunitas</a></li>
                    <li><a href="../community/komunitas_divisi_regional.html" data-lang-key="divisions_regions_footer">Divisi & Regional</a></li>
                    <li><a href="../community/komunitas_karya_member.html" data-lang-key="member_works_footer">Karya Member</a></li>
                    <li><a href="../community/komunitas_forum_diskusi.html" data-lang-key="discussion_forum_footer">Forum Diskusi</a></li>
                    <li><a href="../community/komunitas_light_novel_aria.html" data-lang-key="read_aria_novel_footer">Baca Light Novel Aria</a></li>
                    <li><a href="../community/komunitas_fanmade.html" data-lang-key="fanmade_footer">Fanmade</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4 data-lang-key="help_relations_footer">BANTUAN DAN RELASI</h4>
                <ul>
                    <li><a href="kontak.html" data-lang-key="contact_us_footer">Kontak Kami</a></li>
                    <li><a href="kontak.html#hubungi-founder" data-lang-key="contact_founder_footer">Hubungi Founder</a></li>
                    <li><a href="kontak.html#partnership-kolaborasi" data-lang-key="partnership_collaboration_footer">Partnership / Kolaborasi</a></li>
                    <li><a href="kontak.html#media-pr" data-lang-key="media_pr_footer">Media & Public Relation</a></li>
                    <li><a href="#" data-lang-key="donation_footer">Donasi</a></li>
                    <li><a href="kontak.html#faq" data-lang-key="faq_footer">FAQ / Pertanyaan Umum</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4 data-lang-key="legal_tech_info_footer">LEGAL & INFO TEKNIS</h4>
                <ul>
                    <li><a href="../legal/kebijakan_privasi.html" data-lang-key="privacy_policy_footer">Kebijakan Privasi</a></li>
                    <li><a href="../legal/syarat_ketentuan.html" data-lang-key="terms_conditions_footer">Syarat & Ketentuan</a></li>
                    <li><a href="../legal/kode_etik_komunitas.html" data-lang-key="community_code_of_conduct_footer">Kode Etik Komunitas</a></li>
                    <li><a href="../legal/versi_website_log.html" data-lang-key="website_version_log_footer">Versi Website / Update Log</a></li>
                    <li><a href="../legal/laporan_bug_masukan.html" data-lang-key="bug_report_feedback_footer">Laporan Bug / Masukan</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4 data-lang-key="arias_corner_footer">ARIA'S CORNER</h4>
                <ul>
                    <li><a href="../aria_corner/aria_quote_of_the_day.html" data-lang-key="quote_of_day_footer">Quote of the Day by Aria</a></li>
                    <li><a href="../aria_corner/aria_mini_diary.html" data-lang-key="aria_mini_diary_footer">Aria's Mini Diary</a></li>
                    <li><a href="../aria_corner/aria_photocard_collection.html" data-lang-key="aria_photocard_collection_footer">Aria Photocard Collection</a></li>
                    <li><a href="../aria_corner/aria_cosplayer_tribute.html" data-lang-key="aria_cosplayer_tribute_footer">Aria Cosplayer's</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            <p data-lang-key="aquanime_community_text">Komunitas AquaNime</p>
            <p data-lang-key="region_text">Wilayah: Jabodetabek, Jawa Barat</p>
            <p data-lang-key="email_text">Email: aquanime.ow@gmail.com</p>
            <p data-lang-key="copyright_text">©2017-2025 AquaNime. All rights reserved. Didukung oleh komunitas untuk komunitas.</p>
        </div>
    </footer>

    <script src="../js/script.js"></script>
    <script src="../js/aria_chat_ai.js"></script>
    <script>
        // Portal search script is kept here as it's very specific to this page
        // and relies on elements that exist only here.
        document.addEventListener('DOMContentLoaded', () => {
            const searchInput = document.getElementById('portal-search-input');
            const searchButton = document.getElementById('portal-search-button');
            const portalContentList = document.getElementById('portal-content-list');
            const searchResultInfo = document.getElementById('search-result-info');

            // Collect all searchable items
            let searchableItems = []; // Use let so it can be re-assigned

            function populateSearchableItems() {
                 searchableItems = []; // Clear and re-populate
                 if (portalContentList) {
                    portalContentList.querySelectorAll('a').forEach(link => {
                        const textContent = link.textContent.toLowerCase();
                        const searchTermAttribute = link.dataset.searchTerm ? link.dataset.searchTerm.toLowerCase() : '';
                        // Find the immediate parent <h3> that acts as a category header
                        let categoryHeader = link.closest('ul')?.previousElementSibling;
                        if (!categoryHeader || categoryHeader.tagName !== 'H3') {
                            categoryHeader = link.closest('.portal-gallery-grid')?.previousElementSibling;
                            if (categoryHeader?.tagName !== 'H3') {
                                categoryHeader = null; // No direct H3 parent found
                            }
                        }
                        const categoryText = categoryHeader ? categoryHeader.textContent.toLowerCase() : '';

                        searchableItems.push({
                            element: link.closest('li') || link.closest('.portal-gallery-item') || link,
                            originalDisplay: (link.closest('li') || link.closest('.portal-gallery-item') || link).style.display,
                            text: textContent,
                            searchTerm: searchTermAttribute,
                            category: categoryText
                        });
                    });
                }
            }
            
            // Populate initially
            populateSearchableItems();


            window.performSearch = function() {
                const searchTerm = searchInput.value.toLowerCase().trim();
                let resultsFound = 0;

                // Re-populate searchable items to get latest translated text
                populateSearchableItems();

                searchableItems.forEach(item => {
                    const displayElement = item.element; // This is the <li> or .portal-gallery-item

                    // Check against the current textContent, data-search-term, and category
                    const match = item.text.includes(searchTerm) || item.searchTerm.includes(searchTerm) || item.category.includes(searchTerm);

                    if (searchTerm === '') {
                        displayElement.style.display = displayElement.tagName === 'LI' || displayElement.classList.contains('portal-gallery-item') ? '' : 'block'; // Ensure li/gallery items are shown
                        resultsFound++;
                    } else if (match) {
                        displayElement.style.display = displayElement.tagName === 'LI' || displayElement.classList.contains('portal-gallery-item') ? '' : 'block';
                        resultsFound++;
                    } else {
                        displayElement.style.display = 'none';
                    }
                });

                // Handle categories (h3 tags) - hide if all their children are hidden
                if (portalContentList) {
                    portalContentList.querySelectorAll('h3').forEach(h3 => {
                        let allChildrenHidden = true;
                        let nextElement = h3.nextElementSibling;
                        while (nextElement && (nextElement.tagName === 'UL' || nextElement.classList.contains('portal-gallery-grid'))) {
                            let visibleChildrenCount = 0;
                            if (nextElement.tagName === 'UL') {
                                visibleChildrenCount = Array.from(nextElement.children).filter(child => child.style.display !== 'none').length;
                            } else if (nextElement.classList.contains('portal-gallery-grid')) {
                                visibleChildrenCount = Array.from(nextElement.children).filter(child => child.style.display !== 'none').length;
                            }

                            if (visibleChildrenCount > 0) {
                                allChildrenHidden = false;
                                break;
                            }
                            nextElement = nextElement.nextElementSibling;
                        }

                        if (searchTerm === '') {
                            h3.style.display = '';
                        } else if (allChildrenHidden) {
                            h3.style.display = 'none';
                        } else {
                            h3.style.display = '';
                        }
                    });
                }

                // Update search result info with translation
                if (searchResultInfo) {
                    if (searchTerm === '') {
                        searchResultInfo.style.display = 'none';
                    } else {
                        if (resultsFound > 0) {
                            // getTranslation will use the current language for the template string
                            searchResultInfo.textContent = getTranslation('portal_search_results_found')
                                .replace('{count}', resultsFound)
                                .replace('{term}', searchTerm);
                        } else {
                            searchResultInfo.textContent = getTranslation('portal_search_no_results').replace('{term}', searchTerm);
                        }
                        searchResultInfo.style.display = 'block';
                    }
                }
            }


            if (searchInput && searchButton) {
                searchInput.addEventListener('input', performSearch); // Live search on input
                searchButton.addEventListener('click', performSearch);
                searchInput.addEventListener('keyup', (event) => {
                    if (event.key === 'Enter') {
                        performSearch();
                    }
                });

                // Initial search call to populate result info and show all categories on load
                // This is important because setLanguage also calls performSearch.
                if (searchInput.value === '') {
                    performSearch();
                }
            }
        });
    </script>
</body>
</html>